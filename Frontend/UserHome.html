
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FearFactory - User Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes flicker {
            0%, 19.999%, 22%, 62.999%, 64%, 64.999%, 70%, 100% {
                opacity: 0.99;
                text-shadow: 0 0 10px #ff0000, 0 0 20px #ff0000;
            }
            20%, 21.999%, 63%, 63.999%, 65%, 69.999% {
                opacity: 0.4;
                text-shadow: none;
            }
        }

        @keyframes drip {
            0% { height: 0; opacity: 0; }
            10% { opacity: 1; }
            70% { height: 100px; }
            100% { height: 100px; opacity: 0; }
        }

        @keyframes spiderSwing {
            0% { transform: rotate(5deg); }
            50% { transform: rotate(-5deg); }
            100% { transform: rotate(5deg); }
        }

        @keyframes fogAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes dropdownAppear {
            0% { 
                opacity: 0;
                transform: translateY(-10px) scale(0.95);
            }
            100% { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes glowPulse {
            0% { box-shadow: 0 0 5px rgba(255, 0, 0, 0.5); }
            50% { box-shadow: 0 0 15px rgba(255, 0, 0, 0.8); }
            100% { box-shadow: 0 0 5px rgba(255, 0, 0, 0.5); }
        }

        body {
            background-color: #0a0a0a;
            color: #f8f8f8;
            font-family: 'Roboto', sans-serif;
            position: relative;
            overflow-x: hidden;
        }

        .creepy-font {
            font-family: 'Creepster', cursive;
        }

        .glow-text {
            text-shadow: 0 0 5px #ff0000, 0 0 10px #ff0000;
        }

        .flicker {
            animation: flicker 5s infinite alternate;
        }

        .blood-drip {
            position: absolute;
            top: 0;
            width: 10px;
            height: 0;
            background: linear-gradient(to bottom, #8b0000, #ff0000);
            border-radius: 0 0 5px 5px;
            animation: drip 10s infinite;
            z-index: 1;
        }

        .cobweb {
            position: absolute;
            opacity: 0.3;
            z-index: 1;
        }

        .spider {
            position: absolute;
            width: 40px;
            height: 40px;
            animation: spiderSwing 3s infinite ease-in-out;
            transform-origin: top center;
            z-index: 2;
        }

        .scratch {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
            background-image: 
                linear-gradient(45deg, transparent 45%, rgba(255, 0, 0, 0.1) 45%, transparent 55%),
                linear-gradient(-45deg, transparent 45%, rgba(255, 0, 0, 0.1) 45%, transparent 55%);
            background-size: 10px 10px;
            z-index: 1;
        }

        .fog {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, 
                rgba(0,0,0,0) 0%, 
                rgba(50,50,50,0.1) 25%, 
                rgba(50,50,50,0.1) 75%, 
                rgba(0,0,0,0) 100%);
            background-size: 200% 100%;
            animation: fogAnimation 60s ease infinite;
            pointer-events: none;
            z-index: 1;
        }

        .menu-item {
            position: relative;
            transition: all 0.3s ease;
        }

        .menu-item:hover {
            transform: translateY(-3px);
        }

        .menu-item::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: #ff0000;
            transition: width 0.3s ease;
        }

        .menu-item:hover::after {
            width: 100%;
        }

        .card {
            background-color: rgba(20, 20, 20, 0.8);
            border: 1px solid #3a0404;
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(255, 0, 0, 0.2);
        }

        .progress-bar {
            height: 8px;
            background: linear-gradient(90deg, #ff0000, #8b0000);
            border-radius: 4px;
        }

        .badge {
            background: linear-gradient(135deg, #8b0000, #ff0000);
            
            
        }
        .user-tag {
            
            display: flex;
            flex-wrap: wrap;
            gap: 6px; /* space between badges */
            max-width: 100%;
            overflow: hidden;
        }

        .notification-dot {
            position: absolute;
            top: -2px;
            right: -2px;
            width: 8px;
            height: 8px;
            background-color: #ff0000;
            border-radius: 50%;
            animation: flicker 2s infinite alternate;
        }

        .profile-container {
            position: relative;
            z-index: 1000; /* Ensure this is higher than other elements */
        }

        .profile-menu {
            display: none;
            position: absolute;
            top: calc(100% + 10px);
            right: 0;
            background-color: #1a1a1a;
            border: 1px solid #3a0404;
            border-radius: 8px;
            width: 250px;
            z-index: 1001; /* Higher than container to ensure visibility */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.8), 0 0 15px rgba(255, 0, 0, 0.3);
            animation: dropdownAppear 0.3s ease forwards;
            transform-origin: top right;
            overflow: hidden;
        }

        .profile-container.active .profile-menu {
            display: block;
        }

        .profile-menu::before {
            content: '';
            position: absolute;
            top: -8px;
            right: 20px;
            width: 16px;
            height: 16px;
            background-color: #1a1a1a;
            transform: rotate(45deg);
            border-left: 1px solid #3a0404;
            border-top: 1px solid #3a0404;
            z-index: 1002; /* Ensure the arrow is above other elements */
        }

        .profile-avatar {
            transition: all 0.3s ease;
            animation: glowPulse 3s infinite;
        }

        .profile-container.active .profile-avatar {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.8);
        }

        .profile-menu-item {
            position: relative;
            transition: all 0.3s ease;
            overflow: hidden;
            z-index: 1003; /* Ensure menu items are clickable */
        }

        .profile-menu-item:hover {
            background-color: #3a0404;
        }

        .profile-menu-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 0, 0, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .profile-menu-item:hover::before {
            left: 100%;
        }

        .achievement {
            position: relative;
            overflow: hidden;
        }

        .achievement::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 0, 0, 0.2), transparent);
            transform: rotate(45deg);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { left: -50%; }
            100% { left: 150%; }
        }

        .tab-active {
            border-bottom: 2px solid #ff0000;
            color: #ff0000;
        }

        .tab {
            transition: all 0.3s ease;
        }

        .tab:hover {
            color: #ff0000;
        }

        .content-panel {
            display: none;
        }

        .content-panel.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Fix for dropdown menu visibility */
        .nav-container {
            position: relative;
            z-index: 1000;
        }
        
        /* Ensure fog and decorative elements don't interfere with dropdown */
        .decorative {
            z-index: 5;
            pointer-events: none;
        }
        
        .main-content {
            position: relative;
            z-index: 10;
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Fog effect - with decorative class -->
    <div class="fog decorative"></div>
    <div class="fog decorative" style="animation-delay: -30s;"></div>
    
    <!-- Cobwebs - with decorative class -->
    <div class="cobweb top-0 left-0 decorative">
        <svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0 0L200 200M0 200L200 0M100 0V200M0 100H200" stroke="white" stroke-width="1"/>
        </svg>
    </div>
    <div class="cobweb top-0 right-0 decorative">
        <svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0 0L200 200M0 200L200 0M100 0V200M0 100H200" stroke="white" stroke-width="1"/>
        </svg>
    </div>
    
    <!-- Blood drips - with decorative class -->
    <div class="blood-drip decorative" style="left: 10%; animation-delay: 0s;"></div>
    <div class="blood-drip decorative" style="left: 25%; animation-delay: 2s;"></div>
    <div class="blood-drip decorative" style="left: 40%; animation-delay: 1s;"></div>
    <div class="blood-drip decorative" style="left: 60%; animation-delay: 3s;"></div>
    <div class="blood-drip decorative" style="left: 75%; animation-delay: 0.5s;"></div>
    <div class="blood-drip decorative" style="left: 90%; animation-delay: 2.5s;"></div>
    
    <!-- Spider - with decorative class -->
    <div class="spider decorative" style="top: 100px; right: 50px;">
        <svg viewBox="0 0 100 100" fill="black" xmlns="http://www.w3.org/2000/svg">
            <circle cx="50" cy="50" r="20" />
            <path d="M50 70 L50 90" stroke="black" stroke-width="2" />
            <path d="M50 30 L50 10" stroke="black" stroke-width="2" />
            <path d="M30 50 L10 40" stroke="black" stroke-width="2" />
            <path d="M30 50 L10 60" stroke="black" stroke-width="2" />
            <path d="M70 50 L90 40" stroke="black" stroke-width="2" />
            <path d="M70 50 L90 60" stroke="black" stroke-width="2" />
            <path d="M35 35 L20 20" stroke="black" stroke-width="2" />
            <path d="M65 35 L80 20" stroke="black" stroke-width="2" />
            <path d="M35 65 L20 80" stroke="black" stroke-width="2" />
            <path d="M65 65 L80 80" stroke="black" stroke-width="2" />
        </svg>
    </div>
    
    <!-- Scratches - with decorative class -->
    <div class="scratch w-full h-screen decorative"></div>
    
    <!-- Navigation - with nav-container class for proper z-index -->
    <nav class="nav-container relative px-6 py-4 flex justify-between items-center border-b border-red-900">
        <div class="flex items-center">
            <div class="text-red-600 mr-2" onclick="window.location.href='home.html'">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5-9c.83 0 1.5-.67 1.5-1.5S7.83 8 7 8s-1.5.67-1.5 1.5S6.17 11 7 11zm5-2c.83 0 1.5-.67 1.5-1.5S12.83 6 12 6s-1.5.67-1.5 1.5S11.17 9 12 9zm5 2c.83 0 1.5-.67 1.5-1.5S17.83 8 17 8s-1.5.67-1.5 1.5.67 1.5 1.5 1.5z"/>
                </svg>
            </div>
            <h1 class="text-2xl font-bold creepy-font glow-text flicker">FearFactory</h1>
        </div>
        <div class="hidden md:flex space-x-8">
            <a href="#" class="menu-item text-white hover:text-red-500 transition-colors">Dashboard</a>
            <a href="Experiences.html" class="menu-item text-white hover:text-red-500 transition-colors">Experiences</a>
            <a href="#" class="menu-item text-white hover:text-red-500 transition-colors">Achievements</a>
            <a href="Project2.html" class="menu-item text-white hover:text-red-500 transition-colors">Projects</a>
            <a href="#" class="menu-item text-white hover:text-red-500 transition-colors">Events</a>
        </div>

        <div class="flex items-center space-x-4">
            <!-- Notifications -->
            <div class="relative">
                <button class="text-white hover:text-red-500 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                    </svg>
                    <span class="notification-dot"></span>
                </button>
            </div>
            
            <!-- User Profile - Fixed dropdown with proper z-index -->
            <div class="profile-container" id="profileContainer">
                <button class="flex items-center space-x-2" id="profileButton">
                    <div class="profile-avatar w-10 h-10 rounded-full bg-gradient-to-r from-red-800 to-red-600 flex items-center justify-center border-2 border-red-900">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                    </div>
                    <span class="hidden md:block text-white username" id="user-name-nevbar">NightmareSeeker</span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                    </svg>
                </button>
                
                <div class="profile-menu" id="profile-menu">
                    <div class="p-4 border-b border-red-900 bg-gradient-to-r from-red-900/30 to-black/30">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 rounded-full bg-gradient-to-r from-red-700 to-red-500 flex items-center justify-center border-2 border-red-900">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                </svg>
                            </div>
                            <div>
                                <p class="font-bold text-lg username">NightmareSeeker</p>
                                <div class="flex items-center">
                                    <span class="text-sm text-red-400 membership">Premium Member</span>
                                    <span class="ml-2 w-2 h-2 rounded-full bg-red-500"></span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-3 fear-level">
                            <div class="flex justify-between text-xs mb-1">
                                <span>Fear Level</span>
                                <span class="text-red-400 fear-level-name">Advanced</span>
                            </div>
                            <div class="w-full bg-gray-700 rounded-full h-1.5">
                                <div class="progress-bar fear-level-progress-bar" style="width: 75%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="py-1">
                        <a href="#" class="profile-menu-item flex items-center px-4 py-3 hover:bg-red-900/30 transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                            </svg>
                            <span>My Profile</span>
                        </a>
                        <a href="#" class="profile-menu-item flex items-center px-4 py-3 hover:bg-red-900/30 transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            </svg>
                            <span>Account Settings</span>
                        </a>
                        <a href="#" class="profile-menu-item flex items-center px-4 py-3 hover:bg-red-900/30 transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            <span>My Bookings</span>
                            <span class="ml-auto bg-red-900 text-white text-xs px-2 py-0.5 rounded-full" id="booking_number">0</span>
                        </a>
                        <a href="ContactUs.html" class="profile-menu-item flex items-center px-4 py-3 hover:bg-red-900/30 transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            <span>Help Center</span>
                        </a>
                        <div class="border-t border-red-900/30 my-1"></div>
                        <a href="#" id="logoutBtn" class="profile-menu-item flex items-center px-4 py-3 hover:bg-red-900/30 transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                            </svg>
                            <span>Sign Out</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content - with main-content class for proper z-index -->
    <main class="main-content container mx-auto px-4 py-8">
        <!-- Welcome Banner -->
        <!-- <div class="bg-gradient-to-r from-gray-900 via-red-900 to-gray-900 rounded-lg p-6 mb-8 relative overflow-hidden">
            <div class="relative z-10">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                    <div>
                        <h2 class="text-2xl font-bold mb-2">Welcome back, <span class="creepy-font text-red-500">NightmareSeeker</span>!</h2>
                        <p class="text-gray-300">Ready to face your fears today? Your courage level is rising!</p>
                    </div>
                    <div class="mt-4 md:mt-0">
                        <button class="bg-red-700 hover:bg-red-600 text-white font-bold py-2 px-6 rounded-full transition-all duration-300 transform hover:scale-105">
                            Book New Experience
                        </button>
                    </div>
                </div>
            </div>
            <div class="absolute top-0 right-0 w-32 h-32 opacity-10">
                <svg viewBox="0 0 100 100" fill="white" xmlns="http://www.w3.org/2000/svg">
                    <path d="M50 0 L60 40 L100 50 L60 60 L50 100 L40 60 L0 50 L40 40 Z" />
                </svg>
            </div>
        </div> -->

        <!-- User Profile Section -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
            <!-- Profile Card -->
            <div class="card rounded-lg p-6">
                <div class="flex flex-col items-center">
                    <div class="w-32 h-32 rounded-full bg-gradient-to-r from-red-800 to-red-600 flex items-center justify-center border-4 border-red-900 mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold mb-1 username">NightmareSeeker</h3>
                    <p class="text-red-500 mb-2 membership">Premium Member</p>
                    <div class="flex space-x-2 mb-4 user-tag">
                        <span class="badge text-xs px-2 py-1 rounded-full">Horror Master</span>
                        <span class="badge text-xs px-2 py-1 rounded-full">Fearless</span>
                        <span class="badge text-xs px-2 py-1 rounded-full">Survivor</span>
                    </div>
                    <button class="w-full bg-gray-800 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-md transition-colors mb-4">
                        Edit Profile
                    </button>
                    <div class="w-full">
                        <div class="flex justify-between mb-1 fear-level">
                            <span class="text-sm">Fear Level</span>
                            <span class="text-sm text-red-500 fear-level-name">Advanced</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded-full h-2 mb-4">
                            <div class="progress-bar fear-level-progress-bar" style="width: 75%"></div>
                        </div>
                        <div class="flex justify-between mb-1">
                            <span class="text-sm ">Experiences</span>
                            <span class="text-sm text-red-500 experience-level-name">15/20</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded-full h-2 mb-4">
                            <div class="progress-bar experience-level-progress-bar" style="width: 75%"></div>
                        </div>
                        <div class="flex justify-between mb-1">
                            <span class="text-sm">Achievements</span>
                            <span class="text-sm text-red-500 achievement-level-name">0/25</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded-full h-2">
                            <div class="progress-bar achievement-level-progress-bar" style="width: 10%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Content Area -->
            <div class="lg:col-span-2">
                <!-- Tabs -->
                <div class="flex border-b border-gray-800 mb-6">
                    <button class="tab tab-active px-4 py-2 font-medium" data-tab="upcoming">Upcoming Experiences</button>
                    <button class="tab px-4 py-2 font-medium" data-tab="achievements">Recent Achievements</button>
                    <button class="tab px-4 py-2 font-medium" data-tab="friends">Horror Friends</button>
                </div>

                <!-- Tab Content -->
                <div class="content-panel active" id="upcoming-panel">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="user-experience-container">
                        <!-- Experience Card 1 -->
                        <!-- <div class="card rounded-lg overflow-hidden">
                            <div class="h-40 bg-gradient-to-r from-red-900 to-black relative">
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-red-500 opacity-50" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                </div>
                                <div class="absolute top-2 right-2 bg-red-600 text-white text-xs px-2 py-1 rounded-full">
                                    Tomorrow
                                </div>
                            </div>
                            <div class="p-4">
                                <h3 class="font-bold text-lg mb-1">Haunted Mansion Experience</h3>
                                <p class="text-gray-400 text-sm mb-3">Oct 31, 2023 • 8:00 PM</p>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-red-500">Difficulty: Extreme</span>
                                    <button class="bg-gray-800 hover:bg-gray-700 text-white text-sm py-1 px-3 rounded transition-colors">
                                        Details
                                    </button>
                                </div>
                            </div>
                        </div> -->

                        <!-- Experience Card 2 -->
                        <!-- <div class="card rounded-lg overflow-hidden">
                            <div class="h-40 bg-gradient-to-r from-purple-900 to-black relative">
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-purple-500 opacity-50" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                                    </svg>
                                </div>
                                <div class="absolute top-2 right-2 bg-purple-600 text-white text-xs px-2 py-1 rounded-full">
                                    Next Week
                                </div>
                            </div>
                            <div class="p-4">
                                <h3 class="font-bold text-lg mb-1">Paranormal Investigation</h3>
                                <p class="text-gray-400 text-sm mb-3">Nov 5, 2023 • 10:00 PM</p>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-purple-500">Difficulty: Medium</span>
                                    <button class="bg-gray-800 hover:bg-gray-700 text-white text-sm py-1 px-3 rounded transition-colors">
                                        Details
                                    </button>
                                </div>
                            </div>
                        </div> -->
                    </div>
                </div>

                <div class="content-panel" id="achievements-panel">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4" id="achievements-container">
                        <!-- Achievement 1 -->
                        <!-- <div class="achievement card rounded-lg p-4 text-center">
                            <div class="w-16 h-16 mx-auto mb-3 bg-red-900 rounded-full flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                                </svg>
                            </div>
                            <h4 class="font-bold">Fearless Explorer</h4>
                            <p class="text-sm text-gray-400">Completed 10 horror experiences</p>
                            <p class="text-xs text-red-500 mt-2">Earned 3 days ago</p>
                        </div> -->

                        <!-- Achievement 2 -->
                        <!-- <div class="achievement card rounded-lg p-4 text-center">
                            <div class="w-16 h-16 mx-auto mb-3 bg-red-900 rounded-full flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                                </svg>
                            </div>
                            <h4 class="font-bold">Night Survivor</h4>
                            <p class="text-sm text-gray-400">Survived the overnight challenge</p>
                            <p class="text-xs text-red-500 mt-2">Earned 1 week ago</p>
                        </div> -->

                        <!-- Achievement 3 -->
                        <!-- <div class="achievement card rounded-lg p-4 text-center">
                            <div class="w-16 h-16 mx-auto mb-3 bg-red-900 rounded-full flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z" />
                                </svg>
                            </div>
                            <h4 class="font-bold">Scream Master</h4>
                            <p class="text-sm text-gray-400">Scared 5 friends during an experience</p>
                            <p class="text-xs text-red-500 mt-2">Earned 2 weeks ago</p>
                        </div> -->
                    </div>
                </div>

                <div class="content-panel" id="friends-panel">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="friends-container">
                        <!-- DEMO-Friends -->
                        <!-- Friend 1 -->
                        <div class="card rounded-lg p-4">
                            <div class="flex items-center">
                                <div class="w-12 h-12 rounded-full bg-gradient-to-r from-purple-800 to-purple-600 flex items-center justify-center mr-4">
                                    <span class="text-white font-bold">GH</span>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-bold">GhostHunter92</h4>
                                    <p class="text-sm text-gray-400">20 experiences completed</p>
                                </div>
                                <button class="bg-gray-800 hover:bg-gray-700 text-white text-sm py-1 px-3 rounded transition-colors">
                                    Message
                                </button>
                            </div>
                        </div>

                        <!-- Friend 2 -->
                        <div class="card rounded-lg p-4">
                            <div class="flex items-center">
                                <div class="w-12 h-12 rounded-full bg-gradient-to-r from-red-800 to-red-600 flex items-center justify-center mr-4">
                                    <span class="text-white font-bold">DS</span>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-bold">DarkShadow</h4>
                                    <p class="text-sm text-gray-400">15 experiences completed</p>
                                </div>
                                <button class="bg-gray-800 hover:bg-gray-700 text-white text-sm py-1 px-3 rounded transition-colors">
                                    Message
                                </button>
                            </div>
                        </div>

                        <!-- Friend 3 -->
                        <div class="card rounded-lg p-4">
                            <div class="flex items-center">
                                <div class="w-12 h-12 rounded-full bg-gradient-to-r from-green-800 to-green-600 flex items-center justify-center mr-4">
                                    <span class="text-white font-bold">ZS</span>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-bold">ZombieSlayer</h4>
                                    <p class="text-sm text-gray-400">12 experiences completed</p>
                                </div>
                                <button class="bg-gray-800 hover:bg-gray-700 text-white text-sm py-1 px-3 rounded transition-colors">
                                    Message
                                </button>
                            </div>
                        </div>

                        <!-- Friend 4 -->
                        <div class="card rounded-lg p-4">
                            <div class="flex items-center">
                                <div class="w-12 h-12 rounded-full bg-gradient-to-r from-blue-800 to-blue-600 flex items-center justify-center mr-4">
                                    <span class="text-white font-bold">NW</span>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-bold">NightWalker</h4>
                                    <p class="text-sm text-gray-400">8 experiences completed</p>
                                </div>
                                <button class="bg-gray-800 hover:bg-gray-700 text-white text-sm py-1 px-3 rounded transition-colors">
                                    Message
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recommended Experiences -->
        <h2 class="text-xl font-bold mb-4">Recommended Projects</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8" id="project-container">
            <!-- Experience 1 -->
            <div class="card rounded-lg overflow-hidden">
                <div class="h-48 bg-gradient-to-b from-red-900 to-black relative">
                    <div class="absolute inset-0 flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-20 w-20 text-red-500 opacity-30" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                        </svg>
                    </div>
                </div>
                <div class="p-4">
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="font-bold">Abandoned Asylum</h3>
                        <span class="bg-red-900 text-white text-xs px-2 py-1 rounded">Popular</span>
                    </div>
                    <p class="text-sm text-gray-400 mb-3">Explore the haunted corridors of an abandoned mental institution.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-red-500 font-bold">$49.99</span>
                        <button class="bg-red-700 hover:bg-red-600 text-white text-sm py-1 px-4 rounded transition-colors">
                            Book Now
                        </button>
                    </div>
                </div>
            </div>

            <!-- Experience 2 -->
            <div class="card rounded-lg overflow-hidden">
                <div class="h-48 bg-gradient-to-b from-purple-900 to-black relative">
                    <div class="absolute inset-0 flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-20 w-20 text-purple-500 opacity-30" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z" />
                        </svg>
                    </div>
                </div>
                <div class="p-4">
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="font-bold">Cemetery Night Tour</h3>
                        <span class="bg-purple-900 text-white text-xs px-2 py-1 rounded">New</span>
                    </div>
                    <p class="text-sm text-gray-400 mb-3">A midnight tour through the historic cemetery with paranormal equipment.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-purple-500 font-bold">$39.99</span>
                        <button class="bg-purple-700 hover:bg-purple-600 text-white text-sm py-1 px-4 rounded transition-colors">
                            Book Now
                        </button>
                    </div>
                </div>
            </div>

            <!-- Experience 3 -->
            <div class="card rounded-lg overflow-hidden">
                <div class="h-48 bg-gradient-to-b from-green-900 to-black relative">
                    <div class="absolute inset-0 flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-20 w-20 text-green-500 opacity-30" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
                        </svg>
                    </div>
                </div>
                <div class="p-4">
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="font-bold">Virtual Reality Horror</h3>
                        <span class="bg-green-900 text-white text-xs px-2 py-1 rounded">Trending</span>
                    </div>
                    <p class="text-sm text-gray-400 mb-3">Experience cutting-edge VR horror scenarios that feel too real.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-green-500 font-bold">$59.99</span>
                        <button class="bg-green-700 hover:bg-green-600 text-white text-sm py-1 px-4 rounded transition-colors">
                            Book Now
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Fear Factory News -->
        <div class="bg-gradient-to-r from-gray-900 via-red-900 to-gray-900 rounded-lg p-6">
            <h2 class="text-xl font-bold mb-4">Fear Factory News</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-black bg-opacity-50 p-4 rounded-lg">
                    <h3 class="font-bold mb-2">Halloween Special Event</h3>
                    <p class="text-sm text-gray-300 mb-3">Join us for our special Halloween night extravaganza with exclusive experiences and prizes.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-400">Oct 31, 2023</span>
                        <button class="text-red-500 hover:text-red-400 text-sm transition-colors">
                            Read More
                        </button>
                    </div>
                </div>
                <div class="bg-black bg-opacity-50 p-4 rounded-lg">
                    <h3 class="font-bold mb-2">New Location Opening</h3>
                    <p class="text-sm text-gray-300 mb-3">We're expanding! Check out our new location opening next month with brand new horror experiences.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-400">Nov 15, 2023</span>
                        <button class="text-red-500 hover:text-red-400 text-sm transition-colors">
                            Read More
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="relative z-10 bg-black bg-opacity-70 border-t border-red-900 mt-8 py-6">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <h2 class="text-xl font-bold creepy-font text-red-600">FearFactory</h2>
                    <p class="text-sm text-gray-400">Face your fears, embrace the darkness</p>
                </div>
                <div class="flex space-x-6">
                    <a href="#" class="text-gray-400 hover:text-red-500 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z"/>
                        </svg>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-red-500 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/>
                        </svg>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-red-500 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723 10.054 10.054 0 01-3.127 1.184 4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                        </svg>
                    </a>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-6 pt-6 text-center">
                <p class="text-sm text-gray-500">&copy; 2023 FearFactory. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Tab functionality
        document.addEventListener('DOMContentLoaded', function() {
            const tabs = document.querySelectorAll('.tab');
            const panels = document.querySelectorAll('.content-panel');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs
                    tabs.forEach(t => t.classList.remove('tab-active'));
                    
                    // Add active class to clicked tab
                    tab.classList.add('tab-active');
                    
                    // Hide all panels
                    panels.forEach(panel => panel.classList.remove('active'));
                    
                    // Show the corresponding panel
                    const panelId = `${tab.dataset.tab}-panel`;
                    document.getElementById(panelId).classList.add('active');
                });
            });

            // Profile dropdown functionality
            const profileButton = document.getElementById('profileButton');
            const profileContainer = document.getElementById('profileContainer');
            
            // Toggle dropdown on click
            profileButton.addEventListener('click', (e) => {
                e.stopPropagation(); // Prevent event from bubbling up
                profileContainer.classList.toggle('active');
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', (event) => {
                if (!profileContainer.contains(event.target)) {
                    profileContainer.classList.remove('active');
                }
            });
            
            // Prevent clicks inside dropdown from closing it
            const profileMenu = profileContainer.querySelector('.profile-menu');
            if (profileMenu) {
                profileMenu.addEventListener('click', (e) => {
                    e.stopPropagation(); // Prevent clicks inside menu from bubbling
                });
            }
            
            // Experience booking buttons
            const bookButtons = document.querySelectorAll('button');
            bookButtons.forEach(button => {
                if (button.textContent.trim() === 'Book Now' || button.textContent.trim() === 'Book New Experience') {
                    button.addEventListener('click', () => {
                        alert('Experience booking initiated! Select your date and time on the next screen.');
                    });
                }
                
                if (button.textContent.trim() === 'Details') {
                    button.addEventListener('click', () => {
                        alert('Experience details: This haunting experience will test your courage and mental fortitude. Are you ready to face your fears?');
                    });
                }
                
                if (button.textContent.trim() === 'Message') {
                    button.addEventListener('click', () => {
                        alert('Message feature coming soon! You\'ll be able to coordinate horror adventures with your friends.');
                    });
                }
                
                if (button.textContent.trim() === 'Edit Profile') {
                    button.addEventListener('click', () => {
                        alert('Profile editor will open here. Update your horror preferences and personal details.');
                    });
                }
                
                if (button.textContent.trim() === 'Read More') {
                    button.addEventListener('click', () => {
                        alert('Full article will be displayed here with all the terrifying details!');
                    });
                }
            });
        });
        //---------------------sign-Out----------------------/
        document.getElementById("logoutBtn").addEventListener("click", async function (e) {
        e.preventDefault();

        const refreshToken = getCookie("refresh_token");  // Assuming you store it in cookies

        try {
            // Call backend logout endpoint to blacklist the refresh token
            await fetch("http://127.0.0.1:8000/auth/user/logout/", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({ refresh: refreshToken }),
            });
        } catch (error) {
            console.error("Logout failed", error);
        }

        // Remove tokens from cookies
        deleteCookie("access_token");
        deleteCookie("refresh_token");

        // Redirect to login or home
        window.location.href = "http://127.0.0.1:5500/LoginGreen.html";
        });

        function deleteCookie(name) {
            document.cookie = name + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';
        }

        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }
        //--------------------sign-out---------------------//

        //--------------------Dashboard-users-details-----------//

        document.addEventListener("DOMContentLoaded", async function () {
            const token = getCookie("access_token");

            try {
                const response = await fetch("http://127.0.0.1:8000/dashboard/users/", {
                    headers: {
                        "Authorization": `Bearer ${token}`
                    }
                });

                if (!response.ok) {
                    console.error("Failed to fetch user details");
                    return;
                }

                const data = await response.json();

                // Update ALL elements with class .username
                document.querySelectorAll(".username").forEach(el => {
                    el.textContent = data.username;
                });

                document.querySelectorAll(".membership").forEach(el => {
                    el.textContent = data.membership;
                });

                document.querySelectorAll(".fear-level-name").forEach(el => {
                    el.textContent = data.fear_level;
                });

                document.querySelectorAll(".fear-level-progress-bar").forEach(el => {
                    el.style.width = getFearLevelPercentage(data.fear_level) + "%";
                });

                // Update all .user-tag containers
                document.querySelectorAll(".user-tag").forEach(tagContainer => {
                    tagContainer.innerHTML = "";

                    const tags = data.profile_tags || [];
                    const maxVisible = 5;

                    tags.slice(0, maxVisible).forEach(tag => {
                        const span = document.createElement("span");
                        span.className = "badge text-xs px-2 py-1 rounded-full";
                        span.textContent = tag;
                        tagContainer.appendChild(span);
                    });

                    if (tags.length > maxVisible) {
                        const remainingCount = tags.length - maxVisible;
                        const moreSpan = document.createElement("span");
                        moreSpan.className = "badge text-xs px-2 py-1 rounded-full bg-gray-600 text-white";
                        moreSpan.textContent = `+${remainingCount} more`;
                        tagContainer.appendChild(moreSpan);
                    }
                });

                // Optional (static progress bar values)
                document.querySelectorAll(".experience-level-name").forEach(el => {
                    el.textContent = data.user_experience_count+"/"+data.user_experience_total_count;
                });
                document.querySelectorAll(".experience-level-progress-bar").forEach(el => {
                    el.style.width = getPercentage(data.user_experience_count,data.user_experience_total_count) +"%";
                });

            } catch (err) {
                console.error("Error fetching user data:", err);
            }

            function getPercentage(level,total){
                    let num = (level/total)*100;
                    return num;
            }

            function getCookie(name) {
                const value = `; ${document.cookie}`;
                const parts = value.split(`; ${name}=`);
                if (parts.length === 2) return parts.pop().split(';').shift();
            }

            function getFearLevelPercentage(level) {
                const levels = {
                    "Beginner": 10,
                    "Nervous": 25,
                    "Brave": 40,
                    "Fearless": 60,
                    "Psychotic": 80,
                    "Paranormal Addict": 90,
                    "Shadow Walker": 95,
                    "Jumpscare Veteran": 97,
                    "Nightmare Chaser": 98,
                    "Soul Survivor": 100
                };
                return levels[level] || 0;
            }
            function getPercentage(level,total){
                    let num = (level/total)*100;
                    return num;
                
            }
        });

        document.addEventListener("DOMContentLoaded", async function () {
            const token = getCookie("access_token");

            try {
                const response = await fetch("http://127.0.0.1:8000/dashboard/api/user-achievement/", {
                    headers: {
                        "Authorization": `Bearer ${token}`
                    }
                });

                if (!response.ok) {
                    console.error("Failed to fetch user details");
                    return;
                }

                const data = await response.json();
                const achievements = data.user_achievements || [];
                console.log(achievements)
                // 👇 Get the count of achievements
                const total = achievements[0].user_total_achievement
                const achievementCount = achievements.length;

                document.querySelectorAll(".achievement-level-name").forEach(el => {
                    el.textContent = achievementCount + "/"+ total;
                });

                document.querySelectorAll(".achievement-level-progress-bar").forEach(el => {
                    el.style.width = (getPercentage(achievementCount, total)) + "%";
                });

            } catch (err) {
                console.error("Error fetching user data:", err);
            }

            function getCookie(name) {
                const value = `; ${document.cookie}`;
                const parts = value.split(`; ${name}=`);
                if (parts.length === 2) return parts.pop().split(';').shift();
            }
            function getPercentage(level,total){
                    let num = (level/total)*100;
                    return num;
                
            }
        });

        //--------------------Dashboard-users-details-----------//

        //------------------------Friends----------------------//

        // Function to get token from cookies
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }

        

        document.addEventListener('DOMContentLoaded', function () {
            const token = getCookie("access_token");
            fetch('http://127.0.0.1:8000/auth/users/friend-list-view/', {
                headers: {
                    'Authorization': `Bearer ${token}`,
                    'Content-Type': 'application/json'
                }
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Failed to fetch friends');
                }
                return response.json();
            })
            .then(data => {
                const container = document.getElementById('friends-container');
                container.innerHTML = ''; // Clear any existing content

                const bgColors = ['purple', 'red', 'green', 'blue', 'yellow', 'pink', 'rose'];

                data.friends.forEach(friend => {
                    const initials = friend.name
                        .split(' ')
                        .map(word => word[0])
                        .join('')
                        .substring(0, 2)
                        .toUpperCase();

                    const color = bgColors[Math.floor(Math.random() * bgColors.length)];

                    const cardHTML = `
                        <div class="card rounded-lg p-4 bg-gray-900 border border-${color}-800 shadow-md">
                            <div class="flex items-center">
                                <div class="w-12 h-12 rounded-full bg-gradient-to-r from-${color}-800 to-${color}-600 flex items-center justify-center mr-4">
                                    <span class="text-white font-bold">${initials}</span>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-bold text-white">${friend.name}</h4>
                                    <p class="text-sm text-gray-400">${friend.number_of_achievements} experiences completed</p>
                                </div>
                                <button class="bg-gray-800 hover:bg-gray-700 text-white text-sm py-1 px-3 rounded transition-colors">
                                    Message
                                </button>
                            </div>
                        </div>
                    `;
                    container.insertAdjacentHTML('beforeend', cardHTML);
                });
            })
            .catch(error => {
                console.error('Error loading friends:', error);
            });
        });

        //------------------------Friends----------------------//

        //---------------------Achievements-Panel---------------//

        // Function to get token from cookies
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }

        document.addEventListener('DOMContentLoaded', function () {
            const token = getCookie("access_token");

            fetch('http://127.0.0.1:8000/dashboard/api/user-achievement/', {
                headers: {
                    'Authorization': `Bearer ${token}`,
                    'Content-Type': 'application/json'
                }
            })

            .then(response => {
                if (!response.ok) {
                    throw new Error('Failed to fetch Achievements');
                }
                return response.json();
            })
            .then(data => {
                const container = document.getElementById('achievements-container');
                container.innerHTML = ''; // Clear existing content
                const achievements = data.user_achievements || [];

                achievements.forEach((item, index) => {
                    if (index >= 6) return;  // Limit to 6 achievements

                    const cardHTML = `
                        <div class="achievement card rounded-lg p-4 text-center">
                            <div class="w-16 h-16 mx-auto mb-3 bg-red-900 rounded-full flex items-center justify-center text-white text-2xl">
                                ${item.emoji || "🏆"}
                            </div>
                            <h4 class="font-bold">${item.name}</h4>
                            <p class="text-sm text-gray-400">Achievement Unlocked</p>
                            <p class="text-xs text-red-500 mt-2">Earned on ${item.earned_on}</p>
                        </div>
                    `;
                    container.insertAdjacentHTML('beforeend', cardHTML);
                    
                });
            })
            .catch(error => {
                console.error('Error loading achievements:', error);
            });
        });

        //---------------------Achievements-Panel---------------//


        //---------------------USER-EXPERIENCE----------------//

        // Function to get token from cookies
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }

        document.addEventListener('DOMContentLoaded', function () {
            const token = getCookie("access_token");

            fetch('http://127.0.0.1:8000/dashboard/api/experience/', {
                headers: {
                    'Authorization': `Bearer ${token}`,
                    'Content-Type': 'application/json'
                }
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Failed to fetch Achievements');
                }
                return response.json();
            })
            .then(data => {
                const booking_number = document.getElementById('booking_number');
                booking_number.textContent = `${data.not_completed_number}`;
                const container = document.getElementById('user-experience-container');
                container.innerHTML = ''; // Clear existing content
                const experiences = data.user_experience || [];
                console.log(experiences.not_completed_number)
                const bgColors = ['purple', 'red', 'green', 'blue', 'yellow', 'pink', 'rose'];
                experiences.forEach((item, index) => {
                    if (index >= 4) return;  // Limit to 6 experience
                    const color = bgColors[Math.floor(Math.random() * bgColors.length)];
                    const cardHTML = `
                                                <!-- Experience Card 1 -->
                        <div class="card rounded-lg overflow-hidden">
                            <div class="h-40 bg-gradient-to-r from-${color}-900 to-black relative">
                                <div class="h-40 bg-black relative">
                                    <img src="http://127.0.0.1:8000${item.image || '/static/default.jpg'}" alt="${item.title}" class="object-cover w-full h-full opacity-90">
                                </div>
                                <div class="absolute top-2 right-2 bg-${color}-600 text-white text-xs px-2 py-1 rounded-full">
                                    Tomorrow
                                </div>
                            </div>
                            <div class="p-4">
                                <h3 class="font-bold text-lg mb-1">${item.name}</h3>
                                <p class="text-gray-400 text-sm mb-3">${item.joined_at}</p>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-red-500">Difficulty: ${item.difficulty}</span>
                                    <button class="bg-gray-800 hover:bg-gray-700 text-white text-sm py-1 px-3 rounded transition-colors" onclick="window.location.href='Experiences.html'">
                                        Details
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    container.insertAdjacentHTML('beforeend', cardHTML);
                    
                });
            })
            .catch(error => {
                console.error('Error loading achievements:', error);
            });
        });

        //---------------------USER-EXPERIENCE----------------//


        //---------------------RECOMMENDED-EXPERIENCE-------------//

        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }

        document.addEventListener('DOMContentLoaded', function () {
            const token = getCookie("access_token");

            fetch('http://127.0.0.1:8000/projects/project/', {
                headers: {
                    'Authorization': `Bearer ${token}`,
                    'Content-Type': 'application/json'
                }
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Failed to fetch Achievements');
                }
                return response.json();
            })
            .then(data => {
                const container = document.getElementById('project-container');
                container.innerHTML = ''; // Clear existing content
                const project = data.projects || [];
                const bgColors = ['purple', 'red', 'green', 'blue', 'yellow', 'pink', 'rose'];
                project.forEach((item, index) => {
                    if (index >= 3) return;  // Limit to 6 experience
                    const color = bgColors[Math.floor(Math.random() * bgColors.length)];
                    let is_p = ""
                    if (item.is_premium) {
                        is_p = "Premium"
                    }else{
                        is_p = "Not-Premium"
                    } 

                    const cardHTML = `
                                                <!-- project Card 1 -->
                        <div class="card rounded-lg overflow-hidden">
                            <div class="h-50 bg-gradient-to-b from-${color}-900 to-black relative">
                                <div class="h-50 bg-black relative">
                                    <img src="http://127.0.0.1:8000${item.image_url || '/static/default.jpg'}" alt="${item.title}" class="object-cover w-full h-full opacity-90">
                                </div>
                            </div>
                            <div class="p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <h3 class="font-bold">${item.title}</h3>
                                    <span class="bg-${color}-900 text-white text-xs px-2 py-1 rounded">${is_p}</span>
                                </div>
                                <p class="text-sm text-gray-400 mb-3">${item.description}</p>
                                <div class="flex justify-between items-center">
                                    <span class="text-red-500 font-bold">$${item.price}</span>
                                    <button onclick="window.location.href='project2.html'" class="bg-red-700 hover:bg-red-600 text-white text-sm py-1 px-4 rounded transition-colors">
                                        Book Now
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                    container.insertAdjacentHTML('beforeend', cardHTML);
                    
                });
            })
            .catch(error => {
                console.error('Error loading achievements:', error);
            });
        });

        //---------------------RECOMMENDED-EXPERIENCE-------------//

        //---------------------REDIRECT-TO-LOGIN-PAGE--------------//

        // Cookie functions
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            return parts.length === 2 ? parts.pop().split(';').shift() : null;
        }

        function setCookie(name, value, days) {
            const expires = new Date(Date.now() + days * 86400000).toUTCString();
            document.cookie = `${name}=${value}; expires=${expires}; path=/; secure; SameSite=Strict`;
        }

        // Try to refresh token
        async function tryRefreshToken() {
            const refreshToken = getCookie('refresh_token');

            if (!refreshToken) {
                alert("Session expired. Please log in again.");
                return false;
            }

            try {
                const res = await fetch('http://127.0.0.1:8000/auth/api/token/refresh/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ refresh: refreshToken })
                });

                if (!res.ok) {
                    throw new Error("Refresh token invalid");
                }

                const data = await res.json();
                setCookie('access_token', data.access, 1);
                return true;
            } catch (err) {
                alert("Authentication failed. Please log in again.");
                return false;
            }
        }

        // Fetch protected data
        async function fetchProtectedData() {
            let token = getCookie('access_token');
            if (!token) {
                window.location.href = "http://127.0.0.1:5500/LoginGreen.html";
                return;
            }

            try {
                let res = await fetch('http://127.0.0.1:8000/auth/api/check-auth', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                // If token expired, try refresh
                if (res.status === 401) {
                    const refreshed = await tryRefreshToken();
                    if (refreshed) {
                        return fetchProtectedData(); // retry after refresh
                    } else {
                        check.innerText = "Session expired. Please log in again.";
                        return;
                    }
                }
                //Redirecting to the UserHome Page.
                console.log("You a re log in to user Dashboard")
            } catch (err) {
                console.error(err);
                check.innerText = "Error fetching data.";
            }
        }

        // On page load
        window.onload = () => {
            fetchProtectedData();
        };


        //---------------------REDIRECT-TO-LOGIN-PAGE--------------//

        
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'93db4ebc909f47ef',t:'MTc0Njg5OTcyNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>